import{o as n,a as l}from"./chunk-D4RADZKF-Db4mA--H.js";import{u as k,a as _,m as D,b as I,d as q,i as $,e as M,o as T,h as N,f as Z,s as w,w as S,r as A,j as R,k as F}from"./gameSlice-BmSVuHBI.js";import{O as U}from"./Options-D-lrnJet.js";const W="_block_yk5en_1",P="_one_yk5en_39",V="_two_yk5en_42",H="_three_yk5en_45",J="_four_yk5en_48",K="_five_yk5en_51",L="_six_yk5en_54",Q="_seven_yk5en_57",O="_eight_yk5en_60",h={block:W,one:P,two:V,three:H,four:J,five:K,six:L,seven:Q,eight:O},X=({id:s,firstClick:a,changeFirstClick:c,isOpened:i,onClick:o,values:e})=>{const f=k(),{isBomb:r,flagsIds:m,query:y,viewSector:d}=_(t=>({isBomb:t.game.bombArea.includes(+s),flagsIds:t.game.flagsIds,query:t.game.query,viewSector:t.game.viewSector})),j=t=>t===1?n.jsx("span",{className:h.one,children:t}):t===2?n.jsx("span",{className:h.two,children:t}):t===3?n.jsx("span",{className:h.three,children:t}):t===4?n.jsx("span",{className:h.four,children:t}):t===5?n.jsx("span",{className:h.five,children:t}):t===6?n.jsx("span",{className:h.six,children:t}):t===7?n.jsx("span",{className:h.seven,children:t}):t===8?n.jsx("span",{className:h.eight,children:t}):n.jsx("span",{children:t}),b=()=>m.includes(+s)?"ðŸš©":y.includes(+s)?"?":i?r?e.bomb:e.number[s]?j(e.number[s]):e.empty:"",x=i&&!r&&!e.number[s],v=i&&e.number[s],u=()=>{if(a){c(Number(s));return}o()},g=t=>{t.preventDefault(),f(q(+s))},C=t=>{t.button===1&&(t.preventDefault(),f(I(+s)))},B=t=>{t.button===1&&(t.preventDefault(),f(D()))},G=d.includes(+s);return n.jsx("span",{className:h.block,id:s,onClick:u,onContextMenu:g,onMouseDown:C,onMouseUp:B,"data-opened":i,"data-bomb":i&&r,"data-empty":x,"data-number":v,"data-viewSector":G,children:b()})},Y="_board_1a3vx_1",z={board:Y},ee=l.memo(function({sizeX:a,sizeY:c,size:i,bombs:o}){const e=k(),{sizeArea:f,bombArea:r,firstClick:m,clickId:y,openedBlocks:d,values:j,flagsIds:b,isWin:x}=_(u=>u.game);l.useEffect(()=>{document.documentElement.style.setProperty("--sizeX",a.toString()),document.documentElement.style.setProperty("--sizeY",c.toString())},[a,c]),l.useEffect(()=>{e($({sizeX:a,sizeY:c,bombs:o}))},[a,c,o,e]),l.useEffect(()=>{m||e(M())},[m,y,e]),l.useEffect(()=>{!m&&r.length>0&&e(T())},[m,r.length,e]);const v=l.useCallback(u=>{if(!d.includes(u)){if(m){e(N(u));return}e(Z(u))}},[e,m,d]);return l.useEffect(()=>{b.every(u=>r.includes(u))&&b.length==r.length&&r.length>0&&(x||(e(w()),e(S()))),d.length===i-r.length&&(x||(e(w()),e(S())))},[b,r,x,d,e]),n.jsx("div",{className:z.board,children:f.map(u=>u.map(g=>n.jsx(X,{id:g.toString(),firstClick:m,changeFirstClick:C=>e(N(C)),isOpened:d.includes(g),onClick:()=>v(g),values:j},g)))})}),te="_counter_1px34_1",ne={counter:te},se=()=>{let s=_(o=>o.game.bombs);const a=_(o=>o.game.flagsIds.length),[c,i]=l.useState(_(o=>o.game.bombs));return l.useEffect(()=>{i(s-a)},[a,s]),n.jsx("div",{className:ne.counter,children:c})},re="_resetGame_sqhbr_2",oe="_btn_sqhbr_7",ce="_defeat_sqhbr_26",ae="_win_sqhbr_29",p={resetGame:re,btn:oe,defeat:ce,win:ae},ie=()=>{const s=k(),{isWin:a,isDefeat:c}=_(e=>e.game),i=()=>{s(A())},o=()=>a?`${p.btn} ${p.win}`:c?`${p.btn} ${p.defeat}`:`${p.btn}`;return n.jsx("div",{className:p.resetGame,children:n.jsx("button",{onClick:i,className:o()})})},le="_timer_1c7i5_1",me={timer:le},ue=()=>{const s=k(),{time:a,isRunning:c,firstClick:i,isWin:o,isDefeat:e}=_(r=>r.game);l.useEffect(()=>{!i&&!c&&s(R());let r;return c&&!o&&!e&&(r=setInterval(()=>{s(F())},1e3)),()=>{r&&clearInterval(r)}},[c,i,o,e]);const f=r=>{let m=r%60;return`${Math.floor(r/60).toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}`};return n.jsx("div",{className:me.timer,children:f(a)})},fe="_gameZone_9uc40_1",he="_panel_9uc40_10",E={gameZone:fe,panel:he},pe=l.memo(function({sizeX:a,sizeY:c,size:i,bombs:o}){const e=k(),{sizeArea:f}=_(r=>r.game);return l.useEffect(()=>{f.length===0&&e($({sizeX:a,sizeY:c,bombs:o}))},[a,c,f,o,e]),n.jsxs("div",{className:E.gameZone,children:[n.jsxs("div",{className:E.panel,children:[n.jsx(se,{}),n.jsx(ie,{}),n.jsx(U,{}),n.jsx(ue,{})]}),n.jsx(ee,{sizeX:a,sizeY:c,size:i,bombs:o})]})});export{pe as G};
