import{o as s,a as u}from"./chunk-D4RADZKF-Db4mA--H.js";import{u as j,a as b,b as B,i as w,d as G,o as S,h as C,e as I,s as y,w as $,r as T,f as Z,j as q}from"./gameSlice-hhB7dbPH.js";import{O as A}from"./Options-BcCR_TX2.js";const R="_block_11mbu_1",D="_one_11mbu_35",F="_two_11mbu_38",W="_three_11mbu_41",M="_four_11mbu_44",P="_five_11mbu_47",H="_six_11mbu_50",J="_seven_11mbu_53",K="_eight_11mbu_56",_={block:R,one:D,two:F,three:W,four:M,five:P,six:H,seven:J,eight:K},L=({id:n,firstClick:a,changeFirstClick:r,isOpened:o,onClick:i,values:e})=>{const h=j(),{bombArea:c,flagsIds:l,query:k}=b(t=>t.game),f=c.includes(+n),N=t=>t===1?s.jsx("span",{className:_.one,children:t}):t===2?s.jsx("span",{className:_.two,children:t}):t===3?s.jsx("span",{className:_.three,children:t}):t===4?s.jsx("span",{className:_.four,children:t}):t===5?s.jsx("span",{className:_.five,children:t}):t===6?s.jsx("span",{className:_.six,children:t}):t===7?s.jsx("span",{className:_.seven,children:t}):t===8?s.jsx("span",{className:_.eight,children:t}):s.jsx("span",{children:t}),d=()=>l.includes(+n)?"ðŸš©":k.includes(+n)?"?":o?f?e.bomb:e.number[n]?N(e.number[n]):e.empty:"",x=o&&!f&&!e.number[n],v=o&&e.number[n],m=()=>{if(a){r(Number(n));return}i()},g=t=>{t.preventDefault(),h(B(+n))};return s.jsx("span",{className:_.block,id:n,onClick:m,onContextMenu:g,"data-opened":o,"data-bomb":o&&f,"data-empty":x,"data-number":v,children:d()})},Q="_board_1a3vx_1",U={board:Q},V=u.memo(function({sizeX:a,sizeY:r,size:o,bombs:i}){const e=j(),{sizeArea:h,bombArea:c,firstClick:l,clickId:k,openedBlocks:f,values:N,flagsIds:d,isWin:x}=b(m=>m.game);u.useEffect(()=>{document.documentElement.style.setProperty("--sizeX",a.toString()),document.documentElement.style.setProperty("--sizeY",r.toString())},[a,r]),u.useEffect(()=>{e(w({sizeX:a,sizeY:r,bombs:i}))},[a,r,i,e]),u.useEffect(()=>{l||e(G())},[l,k,e]),u.useEffect(()=>{!l&&c.length>0&&e(S())},[l,c.length,e]);const v=u.useCallback(m=>{if(!f.includes(m)){if(l){e(C(m));return}e(I(m))}},[e,l,f]);return u.useEffect(()=>{d.every(m=>c.includes(m))&&d.length==c.length&&c.length>0&&(x||(e(y()),e($()))),f.length===o-c.length&&(x||(e(y()),e($())))},[d,c,x,f,e]),s.jsx("div",{className:U.board,children:h.map(m=>m.map(g=>s.jsx(L,{id:g.toString(),firstClick:l,changeFirstClick:t=>e(C(t)),isOpened:f.includes(g),onClick:()=>v(g),values:N},g)))})}),O="_counter_1px34_1",X={counter:O},Y=()=>{let n=b(r=>r.game.bombs);const a=b(r=>r.game.flagsIds.length);return n-=a,s.jsx("div",{className:X.counter,children:n})},z="_resetGame_sqhbr_2",ee="_btn_sqhbr_7",te="_defeat_sqhbr_26",se="_win_sqhbr_29",p={resetGame:z,btn:ee,defeat:te,win:se},ne=()=>{const n=j(),{isWin:a,isDefeat:r}=b(e=>e.game),o=()=>{n(T())},i=()=>a?`${p.btn} ${p.win}`:r?`${p.btn} ${p.defeat}`:`${p.btn}`;return s.jsx("div",{className:p.resetGame,children:s.jsx("button",{onClick:o,className:i()})})},re="_timer_1c7i5_1",ce={timer:re},ae=()=>{const n=j(),{time:a,isRunning:r,firstClick:o,isWin:i,isDefeat:e}=b(c=>c.game);u.useEffect(()=>{!o&&!r&&n(Z());let c;return r&&!i&&!e&&(c=setInterval(()=>{n(q())},1e3)),()=>{c&&clearInterval(c)}},[r,o,i,e]);const h=c=>{let l=c%60;return`${Math.floor(c/60).toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`};return s.jsx("div",{className:ce.timer,children:h(a)})},oe="_gameZone_9uc40_1",ie="_panel_9uc40_10",E={gameZone:oe,panel:ie},fe=u.memo(function({sizeX:a,sizeY:r,size:o,bombs:i}){const e=j(),{sizeArea:h}=b(c=>c.game);return u.useEffect(()=>{h.length===0&&e(w({sizeX:a,sizeY:r,bombs:i}))},[a,r,h,i,e]),s.jsxs("div",{className:E.gameZone,children:[s.jsxs("div",{className:E.panel,children:[s.jsx(Y,{}),s.jsx(ne,{}),s.jsx(A,{}),s.jsx(ae,{})]}),s.jsx(V,{sizeX:a,sizeY:r,size:o,bombs:i})]})});export{fe as G};
