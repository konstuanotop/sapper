import{o as s,a as l}from"./chunk-D4RADZKF-Db4mA--H.js";import{u as x,a as h,b as w,i as $,d as G,o as S,h as y,e as I,s as C,w as v,r as q,f as T,j as Z}from"./gameSlice-hhB7dbPH.js";import{O as A}from"./Options-BcCR_TX2.js";const R="_block_11mbu_1",D="_one_11mbu_35",F="_two_11mbu_38",W="_three_11mbu_41",M="_four_11mbu_44",P="_five_11mbu_47",H="_six_11mbu_50",J="_seven_11mbu_53",K="_eight_11mbu_56",f={block:R,one:D,two:F,three:W,four:M,five:P,six:H,seven:J,eight:K},L=({id:r,firstClick:o,changeFirstClick:a,isOpened:i,onClick:c,values:e})=>{const _=x(),{isBomb:n,flagsIds:m,query:j}=h(t=>({isBomb:t.game.bombArea.includes(+r),flagsIds:t.game.flagsIds,query:t.game.query})),b=t=>t===1?s.jsx("span",{className:f.one,children:t}):t===2?s.jsx("span",{className:f.two,children:t}):t===3?s.jsx("span",{className:f.three,children:t}):t===4?s.jsx("span",{className:f.four,children:t}):t===5?s.jsx("span",{className:f.five,children:t}):t===6?s.jsx("span",{className:f.six,children:t}):t===7?s.jsx("span",{className:f.seven,children:t}):t===8?s.jsx("span",{className:f.eight,children:t}):s.jsx("span",{children:t}),k=()=>m.includes(+r)?"ðŸš©":j.includes(+r)?"?":i?n?e.bomb:e.number[r]?b(e.number[r]):e.empty:"",d=i&&!n&&!e.number[r],p=i&&e.number[r],N=()=>{if(o){a(Number(r));return}c()},u=t=>{t.preventDefault(),_(w(+r))};return s.jsx("span",{className:f.block,id:r,onClick:N,onContextMenu:u,"data-opened":i,"data-bomb":i&&n,"data-empty":d,"data-number":p,children:k()})},Q="_board_1a3vx_1",U={board:Q},V=l.memo(function({sizeX:o,sizeY:a,size:i,bombs:c}){const e=x(),{sizeArea:_,bombArea:n,firstClick:m,clickId:j,openedBlocks:b,values:k,flagsIds:d,isWin:p}=h(u=>u.game);l.useEffect(()=>{document.documentElement.style.setProperty("--sizeX",o.toString()),document.documentElement.style.setProperty("--sizeY",a.toString())},[o,a]),l.useEffect(()=>{e($({sizeX:o,sizeY:a,bombs:c}))},[o,a,c,e]),l.useEffect(()=>{m||e(G())},[m,j,e]),l.useEffect(()=>{!m&&n.length>0&&e(S())},[m,n.length,e]);const N=l.useCallback(u=>{if(!b.includes(u)){if(m){e(y(u));return}e(I(u))}},[e,m,b]);return l.useEffect(()=>{d.every(u=>n.includes(u))&&d.length==n.length&&n.length>0&&(p||(e(C()),e(v()))),b.length===i-n.length&&(p||(e(C()),e(v())))},[d,n,p,b,e]),s.jsx("div",{className:U.board,children:_.map(u=>u.map(t=>s.jsx(L,{id:t.toString(),firstClick:m,changeFirstClick:B=>e(y(B)),isOpened:b.includes(t),onClick:()=>N(t),values:k},t)))})}),O="_counter_1px34_1",X={counter:O},Y=()=>{let r=h(c=>c.game.bombs);const o=h(c=>c.game.flagsIds.length),[a,i]=l.useState(h(c=>c.game.bombs));return l.useEffect(()=>{i(r-o)},[o,r]),s.jsx("div",{className:X.counter,children:a})},z="_resetGame_sqhbr_2",ee="_btn_sqhbr_7",te="_defeat_sqhbr_26",se="_win_sqhbr_29",g={resetGame:z,btn:ee,defeat:te,win:se},ne=()=>{const r=x(),{isWin:o,isDefeat:a}=h(e=>e.game),i=()=>{r(q())},c=()=>o?`${g.btn} ${g.win}`:a?`${g.btn} ${g.defeat}`:`${g.btn}`;return s.jsx("div",{className:g.resetGame,children:s.jsx("button",{onClick:i,className:c()})})},re="_timer_1c7i5_1",ce={timer:re},ae=()=>{const r=x(),{time:o,isRunning:a,firstClick:i,isWin:c,isDefeat:e}=h(n=>n.game);l.useEffect(()=>{!i&&!a&&r(T());let n;return a&&!c&&!e&&(n=setInterval(()=>{r(Z())},1e3)),()=>{n&&clearInterval(n)}},[a,i,c,e]);const _=n=>{let m=n%60;return`${Math.floor(n/60).toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}`};return s.jsx("div",{className:ce.timer,children:_(o)})},oe="_gameZone_9uc40_1",ie="_panel_9uc40_10",E={gameZone:oe,panel:ie},fe=l.memo(function({sizeX:o,sizeY:a,size:i,bombs:c}){const e=x(),{sizeArea:_}=h(n=>n.game);return l.useEffect(()=>{_.length===0&&e($({sizeX:o,sizeY:a,bombs:c}))},[o,a,_,c,e]),s.jsxs("div",{className:E.gameZone,children:[s.jsxs("div",{className:E.panel,children:[s.jsx(Y,{}),s.jsx(ne,{}),s.jsx(A,{}),s.jsx(ae,{})]}),s.jsx(V,{sizeX:o,sizeY:a,size:i,bombs:c})]})});export{fe as G};
